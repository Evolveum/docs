= Role Engineering and Maintenance Process
:page-nav-title: Role Engineering and Maintenance
:page-display-order: 200
:page-toc: top
:toclevels: 3
:sectnums:
:sectnumlevels: 3

NOTE: WORK IN PROGRESS

Role engineering and maintenance process describes process of collection of various technical information and their synthesis and transformation into business object representing way of accessing of the application - the application role. Also, this process involves collection of application roles into business role - business representation of access of particular business user.

This process requires a cross-team cooperation. Although some application roles may be defined by application engineers or administrators themselves, multiple people must be involved for some other roles. The individual tasks in the process are sometimes unclear. People may understand the concepts and rules differently, the applications may have different internal data models etc.

To have the process effective and manageable, it is designed with the xref:../concepts.adoc[IGA design concepts] in mind.

The Role engineering and maintenance process (sometimes just Role engineering process) is designed to be lightweight and fast, but needs to be fully documented and governed by Role manager. Exceptions are to be managed by IGA administrator or Role manager himself.

Following actors are active in the process:

* *Author* - the person, who created the request for the role creation.
** Application Engineer is typically author of application roles
** Business user is typically author of business roles.
* *Role Owner* - performs decisions of role modifications and assignments. Often it is application engineer for application roles and business manager for business roles.
* *IGA administrator* - reviews the roles and applications definitions and verify them from the viewpoint of technical accuracy and processing details.
* *Role manager* - governs the roles structure. Reviews the roles from the view of their position in the whole model and business functionality.

The process in high level can be described by schemas how the roles are created, updated and decommisioned. After reading the description in the chapters below, please review also details of the process in the xref:role-engineering-details.adoc[process details] page.

== Building New Roles

image::role-eng-draft-to-active.png[Role engineering - new role]

During creation, the new role flows through 4 stages from a DRAFT to the role that is in ACTIVE stage. New roles in ACTIVE state can be assigned and requested.

image::role-eng-new-role.png[]

Author creates new role in the DRAFT stage. In this stage he can update the definition as long as is needed. When the design is finished, he forwards the role to IGA administrator for review.

ADMIN REVIEW stage is included in the process because of the complexity of creation of the role. IGA administrator is able to help author to correct role definition to ensure that the role is technically correct. After review, the IGA administrator forwards the role definition to Role manager for final approval.

Role manager reviews the role from the view of their position in the whole model and its business functionality. If the role design fulfills the requirements, it is approved and moved to ACTIVE state. Of course, the Role manager may reject the role creation or return it for redesign.

=== New Application Role

Definition of application role is not an easy task. It often can't be performed by one person only.

Application roles are created by engineers of the applications that these roles are defining access to. The Application engineer is the position that has the most knowledge about technical implementation of access to the application. Even though Application engineer has knowledge about the application, he may not have enough knowledge of identity management system. So this definition is often product of cooperation of Application engineer and IGA administrator.

To offload IGA administrators, Midpoint must support application engineers with good interface for role definition.
As midpoint configuration may be very complex, the interface must abstract of midpoint terminology and structure and provide the application engineer structured data in a form that the skilled IT engineer is able to fill intuitively or after minimum of learning.

Following schematic interface for xref:examples/app-role-design.adoc[application role design] provides view of what elements should be provided to application engineer for definition.

=== New Business Role

Definition of business role is easier, and therefore the business roles may be created and updated by business personnel.

The high level process for engineering of business roles is the same as for application roles. Main difference is the visual form of the role. Business role does not usually contain any technical configuration, just list of application roles together with business data.

At least at beginning the business roles definitions and configuration will be managed mostly by Role manager or IGA administrators based on his requests.

Schematic description of user interface for business role request is in the xref:business-role-design.adoc[business role design] page.

=== Deployment of New Application

The definition of application roles requires one additional step - definition of application. Applications should be related to application inventory and the objects should be created automatically or manually by application engineer.

image::role-eng-new-app.png[]

Basic step is the definition of an application. The application object can collect data about how the access into application is defined. Whether existing resource or manual connector.

Application is defined by Application engineer. When the application is defined (still in DRAFT stage), the Application engineer will create also all application roles for the application.

Approval of application is processed by the same steps as approval of the related application roles. These objects are then processed by IGA administrator and Role manager together.

Schematic description of user interface for new application is in the xref:application-design.adoc[application design] page.

== Role Modification

image::role-eng-active-to-active.png[Role engineering - update role]

Of course role definition may be modified. And it can be modified even in the ways that nobody thought about during implementation. Having control over all aspects of the role modification could make the process overcomplicated. So the process should cover the modification in reasonable level. The inconsistencies are to be covered by recomputation of the role assignments or in some cases by manual intervention of IGA administrator.

The process in high level is designed so that approved user (Role owner, IGA administrator or even Role Manager himself) performs role modification and the modification is then reviewed and approved or rejected by Role manager.

image::role-eng-modify-role.png[]

When the role is modified, all modification go through approval process. While the process is running, the role assignments take original role definition. All existing assignments are updated according to the new definition only after the role modification is approved.

.Recompute of assignments
Different components of roles may be updated. If just business details are updated (e.g. description, owner), then the update does not affect user's assignments. But, if the provisioning definition of the application role or roles assigned in the business role are updated, then recompute of the role assignments is needed.

Such update and recompute of role assignments may generate a large number of operations. This is not big issue in case of automated provisioning. The IDM systems are designed to handle this, just it may take some time and resources. But, in case of manual provisioning, the update (e.g. update of 1 new manually provisioned application assigned to 100+ users) may generate large number of manual provisioning tasks. As people make errors and different people work differently, some provisioning issues in this case may (and will) happen. This must be handled by the IGA administrator.
//TODO - linka na recompute popis recomputu - do stranky detailov.

.Approvals
Approval schema may vary in implementations based on business requirements and priorities in the process. If the control over the process is priority, then Role owner can be included in every role modification. If the priority si speed and throughput, then the Role owner can be just notified about the updates.

There may be even different approval schemas defined for specific role modifications. E.g. adding application role into business role may require approval of both roles, but does not need approval of Role manager in some implementations.

.Differences between application roles, business roles and applications
There are not many differences between modifications of application roles. If app role is modified, then just one app is affected.

NOTE: Some operations for roles modification (e.g. massive updates) may be performed by IGA administrator using Midpoint studio to decrease effort needed for multiple role updates.


=== Updating Application Role

Update of application role can affect more things - if technical details of provisioning are updated, the recomputing of users with the role assignment (direct or indirect) will be needed. The recomputing may become quite resource intensive operation when the role is assigned to larger amount of users.

Another kind of issues may appear in case when definitions of manual operations are modified. Not all updates are adequately described in working procedures of operation teams or even wasn't anticipated in the design. Manual intervention and cooperation of Application engineer and IGA administrator may be needed in such cases.

=== Updating Business Role

Update of business role is probably the most common operation in the process. This is most often the addition or removal of an application role from the business role. The recompute od users assignments is needed also in this case.

//TODO: vyriesit situaciu ked updatujem business rolu - a bolo by dobre, aby mi pridanie roly do business roly schvalil jej vlastnik#

=== Updating Application

====
TODO
====

== Role Decommissioning

image::role-eng-active-to-archived.png[Role engineering - decommissioning]

At the end of its lifecycle, each role or application object should be correctly decommissioned. The role assignments needs to be removed.

image::role-eng-decom-role.png[]

Decommissioning in real life is often phased. Therefore, the role engineering process allows the role to be first in "deprecated state" and only later on to be really decommissioned. The deprecated state allows the assignments to be still valid, but no new assignments can be created.

//TODO: recompute is needed

=== Decommissioning Application Role

====

Decommissioning aplikacnych roli znamena
====

=== Decommissioning Business Role

====
TODO
====

=== Decommissioning Application

====
TODO
====

== Process Monitoring and Optimization

TODO
// Ako bude prebiehat manazment procesu a jeho optimalizacia.

=== Weekly role design commitee

For increasing of the process throughput ... TODO
// toto je potrebne pre zefektivnnenie procesu - na tejto platforme dokaze efektivnejsie riesit zlozite definicie pri ktorych je potrebna komunikacia. Tu musi vidiet role manager aktualne requesty a musi ich byt schopny rychlo spracuvat - modifikovat, schvalit, vratit na prepracovanie.


== Troubleshooting the process

Failures in manual provisioning::
There is a non-zero chance that some manual operations correctly will not be correctly processed and closed during manual provisioning. The reasons can be various, such as administrative error, or delayed processing and collision with other tickets. Each of these events needs to be assessed individually by the IGA administrator. If events recur, the IGA administrator (or role manager) can initiate modifications to processes, workflows, or configurations.

Issues while recompute::
During recomputing role assignments, a large number of provisioning or deprovisioning activities may be generated.
+
If those activities are automatic, the probability of an issue is minimal. However, for manual operations, it is necessary to expect that part of the operations will not be processed correctly, or it is possible that the system will generate too many tickets. Such an operation must be handled by the IGA administrator together with the operating teams.
