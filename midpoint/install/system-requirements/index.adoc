= MidPoint System Requirements
:page-nav-title: System Requirements
:page-wiki-name: System Requirements
:page-wiki-id: 3145846
:page-wiki-metadata-create-user: mamut
:page-wiki-metadata-create-date: 2011-09-27T13:44:16.115+02:00
:page-wiki-metadata-modify-user: petr.gasparik
:page-wiki-metadata-modify-date: 2020-07-15T11:06:14.784+02:00
:page-upkeep-status: green
:page-toc: top
:page-description: Recommended system sizing and infrastructure configuration for midPoint deployment in various scenarios
:page-keywords: system requirements, sizing, infrastructure, clustering

This document describes system requirements for midPoint and its components.

== Deployment Architecture

A midPoint deployment consists of the following units:

* <<midpoint_server_sizing,MidPoint server>>

* <<database_system_sizing,Database system>>

* <<connector_servers_sizing,Connector servers>> (optional)

Each deployment unit has particular characteristics and requirements as described in the sections below.

[NOTE]
====
It is impossible to provide precise midPoint platform sizing and parametrization
because it vastly depends on your particular usage patterns,
number and nature of running tasks and connected resources,
as well as synchronization and workflow processes.

This article gives general rules as well as estimates based on our experiences from typical deployments.
You are expected to adjust the parameters based on your specific situation and IT operation best practices.
====

[[midpoint_server_sizing]]
== MidPoint Server Sizing

The midPoint server is the core component of any midPoint installation.
It handles the majority of user interactions and data processing, making it particularly sensitive to CPU load and RAM size.
The table below summarizes the recommended resources for typical scenarios:

// TODO: Are the disk size values still valid for 4.9+, with all the new caching?
//(or probably the DB disk size, but the question stands) 2025-07-08 @dakle
.Recommended MidPoint server parameters
[%autowidth]
|===
|  | Minimum | Less than 5,000 users | 5,000 - 50,000 users | 50,000 – 100,000 users | More than 100,000 users

| CPU
| 1 core
| 4 cores
| 8 cores
| 16 cores
| Custom sizing ^*^


| RAM
| 4GB
| 8GB
| 16GB
| 16GB
| Custom sizing ^*^


| Disk space
| 2GB
| 10GB
| 20GB
| 40GB
| Custom sizing ^*^


| Disk I/O
| negligible
| negligible
| negligible
| negligible
| Custom sizing ^*^


|===

^*^ Deployments with more than 100,000 users are supported in midPoint.
However, due to the variability in large-scale environments, it is recommended to consult the specific hardware requirements with link:https://evolveum.com/services/consulting-services/[Evolveum Support].

=== Number of MidPoint Server Instances

The sizing table above assumes a single midPoint instance (node).
Multi-node midPoint instances are usually deployed for high availability reasons, and they are usually two-node systems.
Each node needs to be sized to handle the full load of the system, therefore each node should be deployed according to the midPoint server sizing requirements outlined in the table above.

Another reason for multi-node deployments is to isolate synchronous load (e.g., user interactions) and asynchronous load (e.g., tasks and processes).
However, there is no universal rule for sizing such a system, meaning you need to do a case-to-case analysis and measurements.
The values provided in the table above may serve as a starting point.

[[database_system_sizing]]
== Database System Sizing

// TODO reference native repo docs, when sizing is written for it:
// xref:/midpoint/reference/repository/native-postgresql/postgresql-configuration/#db-server-sizing[]
// checked on 2025-07-08, not written yet. @dakle

The database system stores the vast majority of midPoint data.

The load on the database system depends mostly on the size and nature of the data, usage patterns, and the type and configuration of the database system used.
Use the values below as general guidelines and adjust them to fit your specific use case.
For a more precise estimate, consult the Evolveum database engineers.

.Recommended repository database server parameters
[%autowidth]
|===
|  | Minimal | Less than 5,000 users | 50,000 – 100,000 users | More than 100,000 users

| CPU
| 1 core
| 2 cores
| 8 cores
| Custom sizing ^*^

| RAM
| 2GB
| 3GB
| 12GB
| Custom sizing ^*^

| Disk space
| 1GB
| 5GB
| 20GB-100GB for 3 months audit
| Custom sizing ^*^

| Disk I/O
| small
| medium
| medium to high
| Custom sizing ^*^

|===

^*^ Deployments with more than 100,000 users are supported in midPoint.
However, due to the variability in large-scale environments, it is recommended to consult the specific hardware requirements with link:https://evolveum.com/services/consulting-services/[Evolveum Support].

The recommended values assume that midPoint is used to store operational data, and only a reasonably small amount of historical data (e.g., audit records).
If you plan to store historical data in midPoint, you must account for that when planning the database sizing.

[TIP]
.Shared vs dedicated database
====
The xref:/midpoint/reference/repository/native-postgresql/[native repository] of midPoint relies on PostgreSQL.
It is recommended to use a separate server for the database even for smaller midPoint deployments.
You may even consider to separate databases for xref:/midpoint/reference/security/audit/#separate-repository-configuration-for-audit[audits] and for the repository, as the access patterns and sizing requirements are quite different.
====

[[connector_servers_sizing]]
== Connector Servers (Optional)

xref:/connectors/connid/1.x/connector-server/[Connector Servers] are small software components that act as a proxy for connectors that xref:/connectors/connid/1.x/connector-server/#why-use-a-connector-server[cannot run inside midPoint].
Deployments of these components are quite rare.

Resource requirements of connector servers are usually negligible:
a tiny portion of CPU and RAM, and a disk space measured in megabytes.
We strongly recommend deploying these components on shared servers.

== High Availability

There are several approaches to implement high availability (HA) for midPoint deployments.
Each strategy has different characteristics and costs:

* <<virtualization_based_HA,Virtualization-based HA>>

* <<load_balanced_shared,Load balanced with a shared HA database>>

* <<load_balanced_dedicated,Load balanced with a dedicated database>>

[TIP]
.Not business critical
====
MidPoint is an identity management system, and as such, it is seldom a business-critical system.
If midPoint fails, the impact is usually negligible.
The integrated systems (resources) are independent of the midPoint instance by design.
Therefore midPoint failure does not influence the operation of such systems in any significant way.
A midPoint failure can influence identity management capabilities, password resets etc.
But these functions are usually *not critical* for operation, especially if the outages of midPoint are short (minutes).
Even longer outages (hours) do not usually impact operation of the infrastructure in any significant way.
This is important to keep in mind when choosing the right HA strategy.
====

[[virtualization_based_HA]]
=== Virtualization-based HA

The easiest way to implement high availability (HA) is to use the HA features of the underlying virtualization infrastructure.
If the host machine running the midPoint virtual machine fails, it is easy to fail over the entire virtual machine to a different host.
There will be some downtime during the failover process (usually a few minutes).
However, since midPoint is not a critical system, this downtime is generally acceptable.

This is a cost-efficient failover strategy, especially if midPoint and the database run on the same virtual machine.

In this scenario, midPoint is set up to run in a single-node configuration (default), and no extra configuration is necessary.
The HA mechanisms are completely transparent.
MidPoint has internal mechanisms to recover from system outages, which will be automatically utilized in this setup after the failover.

[[load_balanced_shared]]
=== Load Balanced with a Shared HA Database

In this scenario, multiple instances of midPoint servers are load balanced at the HTTP layer using a standard HTTP load balancer (in the link:https://en.wikipedia.org/wiki/Load_balancing_(computing)#Persistence[sticky mode]).
All midPoint servers connect to the same database, which has internal HA mechanisms.
MidPoint shares the database engine with other applications.

This setup assumes the use of a shared database instance that already has HA mechanisms in place.
Since this database is shared with several applications, link:https://www.geeksforgeeks.org/system-design/active-passive-active-active-architecture-for-high-availability-system/[active-active] HA mechanisms are justifiable, as the cost of the HA setup is divided among multiple applications.

[[load_balanced_dedicated]]
=== Load Balanced with a Dedicated Database

In this scenario, multiple instances of midPoint servers are load balanced at the HTTP layer using a standard HTTP load balancer (in the link:https://en.wikipedia.org/wiki/Load_balancing_(computing)#Persistence[sticky mode]).
All midPoint servers connect to the same database, which has internal HA mechanisms.
The database engine installation is dedicated to midPoint.

This is the most expensive setup and is seldom justifiable due to the cost of the HA database system.
The usual compromise in this case is to use link:https://www.geeksforgeeks.org/system-design/active-passive-active-active-architecture-for-high-availability-system/[active-passive] database HA strategies. 
Due to the low criticality of midPoint, this is usually acceptable from the operational point of view.

== Software Requirements

Refer to the xref:/midpoint/release/[midPoint Releases] documentation for software requirements.

== Infrastructure Requirements

When starting an IAM project, you must prepare not only the midPoint servers but also the database and load balancer (if required).
You need access to the infrastructure where these servers are running, as well as to the source and target systems.
In most cases, the infrastructure is prepared by the administrators on the customer site.

=== Basic Single-Node Deployment

The following schema represents a basic scenario:

//image::environment-schema-basic.png[]
image::midpoint-environment-schema-basic.svg[title="Basic single-node midPoint deployment"]

In the center of the schema, the largest rectangle represents a virtual machine, usually running Linux, with the xref:/midpoint/install/bare-installation/distribution/#purpose-and-quality[basic required set of tools] installed.

==== Shared Database Repository

For the database repository (DB), an existing DB server is usually used.
You have access to the DB using the SQL via the TCP/IP from the midPoint server. 
Do not forget to configure the firewalls to enable communication over the used ports—5432 typically for PostgreSQL, 1433 for MS SQL, 1521 for Oracle, etc.

The database needs to be configured prior to midPoint installation so that the person who installs midPoint can configure the midPoint instance correctly.
In the single-node mode, the DB can be placed on a separate DB server.

==== Notification System

If e-mail notifications are needed, access to the SMTP server and an account with send privileges is required.
If you need SMS notifications, you also need access to an SMS gateway and have the account privileges to send SMS.

==== Secure Remote Deployment

If the deployment is remote (i.e., you don't host it on-site), you need to secure the communication between end-user workstations and the midPoint instance.
One of the options is to use a virtual private network (VPN) for each team member who needs to access midPoint.
VPN provides a tunnel from the user's workstation to midPoint (or the load balancer before it).

A separate SSH access for troubleshooting purposes is advised, so that you have a chance to examine the situation in case the VPN or the load balancer fail.

==== Resources

Then there are the resources.
There are many different communication protocols the resources may use.
The schema above shows just a couple of the most common ones.

You may have an HR system which is only able to give midPoint CSV files, there may be a more complex system, data of which you can access using SQL, you may need to connect an Active Directory, and so on.
With some resources, such as xref:/connectors/connectors/com.evolveum.polygon.connector.sap.SapConnector/[SAP and JCo], you need to enable API on the target resource, open your firewall on servers where the target system is running, and create an account with appropriate permissions to manage identities.
In certain cases, you may have to deploy a <<connector_servers_sizing,connector server>> to access some special resources.
The list of options is endless and very much depends on what exactly you need to manage with midPoint.

=== Multi-Node Deployment

The situation gets a bit more complex when you deploy midPoint on two or more nodes:

//image::environment-schema-HA.png[]
image::midpoint-environment-schema-HA-two-nodes.svg[title="Deployment of midPoint with two nodes, load balancer, VPN, and a few example resources"]

==== Work Distribution

In multi-node deployment, the job distribution among the nodes is handled centrally.

The repository DB keeps track of the task states, i.e., which are to be done, in progress, or done.
This helps to ensure that no single task is processed by two nodes concurrently.
The Quartz library then serves as a smart timer, creating worker tasks which it gives to nodes for processing.
The available tasks are picked by the nodes on the first-come-first-served basis, which ensures reasonably even task distribution.

Refer to xref:/midpoint/reference/tasks/task-manager/[] for details on task handling in midPoint.

==== Communication Among Nodes

Primarily, the nodes communicate with the central Quartz library rather than among themselves,
with the exception of *cache invalidation*.
When a node changes data in the midPoint database, the node informs other nodes about the need to invalidate their cache.
The *communication between nodes runs over HTTPS*.

==== Node Management Access

Identity engineers need to access all nodes, either using the web UI or the REST API, be it via a load balancer or directly. 
Depending on the setup, they may need to connect to the nodes through a VPN which tunnels them to a particular node or the load balancer.

==== All Nodes Are Created Equal

Similarly, each midPoint node needs full access to all the resources other nodes have.
These are, for instance, the shared HA DB repository, the source and target systems, or an SMTP server for notifications.
All nodes need to have the same access level regardless of whether you deploy midPoint on 200 nodes or just one.
This is because *all nodes are created equal*: when one node goes down, others need to replace it in full.

You can check that connections to resource work as expected using `ping`, `telnet`, or `wget`, for instance.

== Environment Requirements

Usually, at least two environments are typically used for the development of an IAM deployment: test and production.
In many cases, there is also a local midPoint installation on the identity engineer's workstation and a separate development environment in the customer's infrastructure.

=== Keep the Environments as Similar as Possible

The best practice is to use a configuration that is as similar as possible in all these environments.
However, the environments should also be completely isolated so that the test environment cannot touch production data on a resource.
VPN can be shared.

We recommend having the same operating system, midPoint version, and resource data for all environments.
If _same_ is not possible, as similar as possible is desirable.
Any differences may lead to situations where something is working and is well tested in one environment, but does not work in another.

If the data are sensitive and cannot be used in the development environment, you can obfuscate them and only use a part of them as a sample.
However, the schema and all attributes that you use need to be used the same way as in the production environment to minimize differences.

When deploying the solution to production, you need to have access to the production environment and the data there.
In this case, it is not necessary to obfuscate data for the test or development environments, because the same identity engineer is responsible for the development, testing and deployment.

[WARNING]
====
Irrespective of whether you use the original or obfuscated data, you need to be able to use production data in the development phase to prevent future issues.

Note that running an IDM project involves consolidating users, changing the data structures, and accessing data in general.
Every discrepancy and exception will surface in production, and you will need to decide how to handle it.
That is why it is best to implement your IDM project when you are not doing acceptance testing, have problems in production, or face hard deadlines.
====

== See Also

* xref:/midpoint/release/[midPoint Releases]

* xref:/midpoint/reference/deployment/clustering-ha/[]
