= Confirm safe management of long-term leaves and former employees
:page-nav-title: Manage inactive employees
:page-display-order: 530
:page-toc: top
:experimental:
:icons: font

In this module, you will test behavior of your midPoint configuration regarding leavers—be it people on long-term leave or former employees.

In this guide, long-term leave stands such cases as for parental leave.
Such users and their accounts should be disabled.
It is important, though, to avoid deleting their accounts, because the employees are expected to return after their leave ends.

In the second part of the module, you will test your midPoint configuration for former employees.
Accounts of former employees need to be disabled and their accounts should be deleted after a defined period of time automatically.
You will use _disabled instead of delete_ and _delayed delete_ activation concepts of midPoint to first disable such users and their AD account, and plan the later deletion of the AD account.

== What awaits you in this module

. Verify long-term leave handling
    .. Set a user status in the HRIS to _Long-term leave_
    .. Verify the user is _Suspended_ in midPoint and _Disabled_ in LDAP.
    .. Set the user status in the HRIS back to _In_
        and verify they are back to _Active_ and _Enabled_ in midPoint and LDAP.
. Confirm leavers are safely deleted from the LDAP server after a grace period.
    .. Set a user status in the HRIS to _Former employee_
    .. Verify the user is _Archived_ in midPoint and _Disabled_ in LDAP.
    .. Check the delayed-deletion trigger placed on the LDAP account.
    .. Confirm the user's LDAP account has been deleted after the set grace period.

:sectnums:

== Employee goes on long-term leave

The first case we are to cover is when employees leave on long-term leave.
You will update the leaving employee in HRIS and observe how midPoint handles the case.

=== Update the user in HRIS

As always, all changes are initiated in the source HR information system.
To update a user in the HRIS, use the same steps as in xref:/midpoint/methodology/first-steps/verify-configuration-behavior/handle-source-system-data-updates/[].

. Pick a user to update, e.g., Martin Knight (employee number: 1006).
. Update their *Status* to _Long-term leave_.
. Export HRIS users to CSV.

=== Let automation handle the updates

Wait for the xref:/midpoint/methodology/first-steps/automate-target-system-integration/generate-usernames-in-midpoint/#automate-importing-users-to-midpoint[recurring HRIS reconciliation task] you have already up and running to pick up the changes.

=== Check the results

Verify how the change was handled using the same steps as in xref:/midpoint/methodology/first-steps/verify-configuration-behavior/handle-source-system-data-updates/#inspect-the-results[].

These should be the results:

* The *Lifecycle state* of the user Martin Knight is set to _Suspended_.
* The user's *Effective status* is _Disabled_ (displayed in the top-right corner of the screen).
* In the user's profile, go to *Projections*, select the LDAP projection, and check that the *Administrative status* is set to _Disabled_.
* You can also check the user directly on the LDAP server.
    The disabled status is mapped there to the `roomNumber` user attribute because LDAP does not support user activation natively.

.User Martin Knight has been suspended due to going on long-term leave
image::midpoint-knight-user-suspended-long-term-leave.webp["User Martin Knight is suspended due to his long-term leave"]

Users who are on the long-term leave in the HRIS are suspended in midPoint.
Users inactive in midPoint, in turn, have their LDAP accounts disabled.
That is because they should not have an access to the accounts, you cannot delete them because the users are expected to return back to work at a later time.

=== After the employee returns

When their long-term leave ends, employees are about to return to work.
They need their accounts back as they were before they left.

. Update the user who is returning in HRIS—set their *Status* back to _In_.
. Wait for the recurring reconciliation task to run.
. Check the user's *Lifecycle state*, *Effective status*, and *Administrative status* of their LDAP projection.
    They should be _Active_ and _Enabled_.m