= MidConnect
:page-visibility: hidden

WARNING: This is a proposed project.
This information is still very fuzzy and incomplete.

== Executive Summary

MidConnect aims at automation of personal data portability between organizations, honoring data protection rules.
The idea is to use existing protocols such as OpenID Connect and SAML, utilizing extensible and configurable identity management engine to map the data.
Core of the solution is based on midPoint, comprehensive open source identity management and governance platform.
MidPoint is already capable of bridging the gaps between incompatible protocols and diverse data schemas, which will be necessary for practical data portability.
However, MidPoint was originally built for management of identities within a single organization.
MidConnect project aims at extending this functionality to reach out to the Internet, to connect midPoint to other organizations, facilitating controlled transfer of personal data.

The ultimate goal is to provide data sovereignty to organizations, such as universities, SMEs and government agencies.
The ambition is to allow management of personal data independent of social networks and cloud service providers.
Our focus is not just on the initial transfer of the data, as such approach does not guarantee that data are properly maintained.
We are focused on a long-term data "links" that can be used to maintain and update the data in a controlled long-term relationship.

Proposed solution is a part of midPrivacy, a broader initiative to create an integrated solution that will be a fusion of identity management and data protection capabilities in one comprehensive open source platform.

== Big Picture

image::midconnect-big-picture.png[Big picture]

== Enrollment Components

Special front-end components, something like registration on steroids.

We think that registration will usually be interactive.
The component may need to:

* Handle data release (data protection), e.g. ask for consent for some attributes.
This may be already handled on the releasing side (Social network, IdP, maybe using UMA, ...).
We may still need to ask for some attributes, or maybe make sure the user is properly informed about personal data use.

* Correlate the identity.
The user may already exist in our system.
This may be semi-manual, e.g. asking the user to confirm (and prove) the match.


== Data Requirement And Release

image::midconnect-data-release-inbound.png[Data release]

Basic ideas:

* Enrollment/registration is never done in a vacuum.
There is always some _basis_ for registration,
e.g. user becoming community member, registration for interest group, etc.

* The "basis" knows what attributes we need.
This also tells us when to delete the attributes.

* We can cache the original data in the shadow.
This may be an advantage when working with several data sources.
The shadow may act as a "lightweight persona".
However, this should be further explored.

* The shadow works as "data link" back to the original SocNet account.
We can update the information in the shadow if there is any way how to do in the protocol (e.g. OAuth/OIDC refresh token).

Considerations:

* Thought about some special data structure that would bind the "data release" to the shadow.
However, this data structure looks almost exactly like assignment.
It looks easier to use assignment, bound to the user.
The account is linked to the user.
However, we would probably need to refer to the shadow in the "basis/release" assignment, to make the data source explicit.

== Outbound

The data requirement and release mechanism works well also on outbound side (and "focus policy" as well).

TODO

== Other Ideas

* Slavek: We may want a special "self asserted" shadow, that would cache data entered by the user during registration flow - and even maybe during normal user profile edits.
In that case we do not lose the data if we ever have to delete/unlink source (e.g. SocNet) shadow.
This may also be easier for data merging and provenance.
This needs to be further explored.


== Questions

* How to implement the "enrollment components"?
In midPoint admin GUI? How it aligns with flexible auth?
Or maybe implement it in the planned "midFront" end-user GUI?
How does it work with Angular?
Would we duplicate flexible auth there?

